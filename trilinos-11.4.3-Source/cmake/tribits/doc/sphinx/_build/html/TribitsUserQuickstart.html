<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1   TriBITS User Quickstart &mdash; Tribits User Quickstart 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Tribits User Quickstart 0.1 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Tribits User Quickstart 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tribits-user-quickstart">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;TriBITS User Quickstart</a><a class="headerlink" href="#tribits-user-quickstart" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Roscoe A. Bartlett</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body"><a class="reference external" href="mailto:bartlett&#46;roscoe&#37;&#52;&#48;gmail&#46;com">bartlett<span>&#46;</span>roscoe<span>&#64;</span>gmail<span>&#46;</span>com</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Abstract:</th><td class="field-body">This document is a generic guide for users of a TriBITS project who need to configure, build, install, and test software that uses the CMake-based TriBITS system.</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#tribits-user-quickstart" id="id1">1&nbsp;&nbsp;&nbsp;TriBITS User Quickstart</a><ul class="auto-toc">
<li><a class="reference internal" href="#introduction" id="id2">1.1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference internal" href="#getting-set-up-to-use-cmake" id="id3">1.2&nbsp;&nbsp;&nbsp;Getting set up to use CMake</a><ul class="auto-toc">
<li><a class="reference internal" href="#installing-a-binary-release-of-cmake-casual-trilinos-users" id="id4">1.2.1&nbsp;&nbsp;&nbsp;Installing a binary release of CMake [casual Trilinos users]</a></li>
<li><a class="reference internal" href="#installing-cmake-from-source-trilinos-developers-and-experienced-users" id="id5">1.2.2&nbsp;&nbsp;&nbsp;Installing CMake from source [Trilinos developers and experienced users]</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getting-help" id="id6">1.3&nbsp;&nbsp;&nbsp;Getting Help</a><ul class="auto-toc">
<li><a class="reference internal" href="#finding-cmake-help-at-the-website" id="id7">1.3.1&nbsp;&nbsp;&nbsp;Finding CMake help at the website</a></li>
<li><a class="reference internal" href="#building-cmake-help-locally" id="id8">1.3.2&nbsp;&nbsp;&nbsp;Building CMake help locally</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-makefile-generator" id="id9">1.4&nbsp;&nbsp;&nbsp;Configuring (Makefile Generator)</a><ul class="auto-toc">
<li><a class="reference internal" href="#setting-up-a-build-directory" id="id10">1.4.1&nbsp;&nbsp;&nbsp;Setting up a build directory</a></li>
<li><a class="reference internal" href="#basic-configuration-of-trilinos" id="id11">1.4.2&nbsp;&nbsp;&nbsp;Basic configuration of Trilinos</a></li>
<li><a class="reference internal" href="#selecting-the-list-of-packages-to-enable" id="id12">1.4.3&nbsp;&nbsp;&nbsp;Selecting the list of packages to enable</a></li>
<li><a class="reference internal" href="#selecting-compiler-and-linker-options" id="id13">1.4.4&nbsp;&nbsp;&nbsp;Selecting compiler and linker options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-makefile-generator" id="id14">1.5&nbsp;&nbsp;&nbsp;Building (Makefile generator)</a><ul class="auto-toc">
<li><a class="reference internal" href="#building-all-targets" id="id15">1.5.1&nbsp;&nbsp;&nbsp;Building all targets</a></li>
<li><a class="reference internal" href="#discovering-what-targets-are-available-to-build-after-configuration" id="id16">1.5.2&nbsp;&nbsp;&nbsp;Discovering what targets are available to build after configuration</a></li>
<li><a class="reference internal" href="#see-all-of-the-targets-to-build-for-a-package" id="id17">1.5.3&nbsp;&nbsp;&nbsp;See all of the targets to build for a package</a></li>
<li><a class="reference internal" href="#building-all-of-the-targets-for-a-package" id="id18">1.5.4&nbsp;&nbsp;&nbsp;Building all of the targets for a package</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-with-ctest" id="id19">1.6&nbsp;&nbsp;&nbsp;Testing with CTest</a><ul class="auto-toc">
<li><a class="reference internal" href="#recommended-testing-using-ctest" id="id20">1.6.1&nbsp;&nbsp;&nbsp;[Recommended] Testing using <em>ctest</em></a></li>
<li><a class="reference internal" href="#only-running-tests-for-a-single-package" id="id21">1.6.2&nbsp;&nbsp;&nbsp;Only running tests for a single package</a></li>
<li><a class="reference internal" href="#running-memory-checking" id="id22">1.6.3&nbsp;&nbsp;&nbsp;Running memory checking</a></li>
<li><a class="reference internal" href="#testing-using-make-test" id="id23">1.6.4&nbsp;&nbsp;&nbsp;Testing using <tt class="docutils literal"><span class="pre">make</span> <span class="pre">test</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing" id="id24">1.7&nbsp;&nbsp;&nbsp;Installing</a><ul class="auto-toc">
<li><a class="reference internal" href="#setting-the-install-prefix-at-configure-time" id="id25">1.7.1&nbsp;&nbsp;&nbsp;Setting the install prefix at configure time</a></li>
<li><a class="reference internal" href="#installing-after-configuration" id="id26">1.7.2&nbsp;&nbsp;&nbsp;Installing after configuration</a></li>
<li><a class="reference internal" href="#uninstall" id="id27">1.7.3&nbsp;&nbsp;&nbsp;Uninstall</a></li>
</ul>
</li>
<li><a class="reference internal" href="#packaging" id="id28">1.8&nbsp;&nbsp;&nbsp;Packaging</a><ul class="auto-toc">
<li><a class="reference internal" href="#creating-a-tarball-of-the-source-tree" id="id29">1.8.1&nbsp;&nbsp;&nbsp;Creating a tarball of the source tree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dashboard-submissions" id="id30">1.9&nbsp;&nbsp;&nbsp;Dashboard submissions</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">1.1&nbsp;&nbsp;&nbsp;Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document is a generic guide for users of a TriBITS project who need to configure, build, install, and test software that uses the CMake-based TriBITS system.  The generic &lt;Project&gt;_ and &lt;PROJECT&gt;_ prefix is used for regular-case and upper-case project names.</p>
</div>
<div class="section" id="getting-set-up-to-use-cmake">
<h2><a class="toc-backref" href="#id3">1.2&nbsp;&nbsp;&nbsp;Getting set up to use CMake</a><a class="headerlink" href="#getting-set-up-to-use-cmake" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing-a-binary-release-of-cmake-casual-trilinos-users">
<h3><a class="toc-backref" href="#id4">1.2.1&nbsp;&nbsp;&nbsp;Installing a binary release of CMake [casual Trilinos users]</a><a class="headerlink" href="#installing-a-binary-release-of-cmake-casual-trilinos-users" title="Permalink to this headline">¶</a></h3>
<p>Download and install the binary (currently version 2.8 is required) from:</p>
<blockquote>
<div><a class="reference external" href="http://www.cmake.org/cmake/resources/software.html">http://www.cmake.org/cmake/resources/software.html</a></div></blockquote>
</div>
<div class="section" id="installing-cmake-from-source-trilinos-developers-and-experienced-users">
<h3><a class="toc-backref" href="#id5">1.2.2&nbsp;&nbsp;&nbsp;Installing CMake from source [Trilinos developers and experienced users]</a><a class="headerlink" href="#installing-cmake-from-source-trilinos-developers-and-experienced-users" title="Permalink to this headline">¶</a></h3>
<p>If you have access to the Trilinos CVS repository, then install CMake with:</p>
<div class="highlight-python"><pre>$ $TRILINOS_HOME/cmake/python/install-cmake.py \
  --install-dir=INSTALL_BASE_DIR</pre>
</div>
<p>This will result in cmake and related CMake tools being installed in
INSTALL_BASE_DIR/bin.</p>
<p>Getting help for installing CMake with this script:</p>
<div class="highlight-python"><pre>$ $TRILINOS_HOME/cmake/python/install-cmake.py --help</pre>
</div>
<p>NOTE: you will want to read the help message about how to use sudo to
install in a privileged location (like the default /usr/local/bin).</p>
</div>
</div>
<div class="section" id="getting-help">
<h2><a class="toc-backref" href="#id6">1.3&nbsp;&nbsp;&nbsp;Getting Help</a><a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h2>
<div class="section" id="finding-cmake-help-at-the-website">
<h3><a class="toc-backref" href="#id7">1.3.1&nbsp;&nbsp;&nbsp;Finding CMake help at the website</a><a class="headerlink" href="#finding-cmake-help-at-the-website" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><a class="reference external" href="http://www.cmake.org">http://www.cmake.org</a></div></blockquote>
</div>
<div class="section" id="building-cmake-help-locally">
<h3><a class="toc-backref" href="#id8">1.3.2&nbsp;&nbsp;&nbsp;Building CMake help locally</a><a class="headerlink" href="#building-cmake-help-locally" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ cmake --help-full cmake.help.html</pre>
</div>
<p>(Open your web browser to the file cmake.help.html)</p>
</div>
</div>
<div class="section" id="configuring-makefile-generator">
<h2><a class="toc-backref" href="#id9">1.4&nbsp;&nbsp;&nbsp;Configuring (Makefile Generator)</a><a class="headerlink" href="#configuring-makefile-generator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-up-a-build-directory">
<h3><a class="toc-backref" href="#id10">1.4.1&nbsp;&nbsp;&nbsp;Setting up a build directory</a><a class="headerlink" href="#setting-up-a-build-directory" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ mkdir SOME_BUILD_DIR
$ cd SOME_BUILD_DIR</pre>
</div>
<p>NOTE: You can create a build directory from any location you would like.  It
can be a sub-directory of the Trilinos base source directory or anywhere
else.</p>
<p>NOTE: If you mistakenly try to configure for an in-source build (e.g. with
&#8216;cmake .&#8217;) you will get an error message and instructions on how to resolve
the problem by deleting the generated CMakeCache.txt file (and other
generated files) and then follow directions on how to create a different
build directory as shown above.</p>
</div>
<div class="section" id="basic-configuration-of-trilinos">
<h3><a class="toc-backref" href="#id11">1.4.2&nbsp;&nbsp;&nbsp;Basic configuration of Trilinos</a><a class="headerlink" href="#basic-configuration-of-trilinos" title="Permalink to this headline">¶</a></h3>
<ol class="loweralpha">
<li><p class="first">[Recommended] Create a &#8216;do-configure&#8217; script such as:</p>
<div class="highlight-python"><pre>EXTRA_ARGS=$@

cmake \
  -D CMAKE_BUILD_TYPE:STRING=DEBUG \
  -D Trilinos_ENABLE_TESTS:BOOL=ON \
  $EXTRA_ARGS \
  ${TRILINOS_HOME}</pre>
</div>
</li>
</ol>
<blockquote>
<div><p>and then run it with:</p>
<div class="highlight-python"><pre>./do-configure [OTHER OPTIONS] -DTrilinos_ENABLE_&lt;TRIBITS_PACKAGE&gt;=ON</pre>
</div>
<p>where &lt;TRIBITS_PACKAGE&gt; is Epetra, AztecOO, etc. and TRILINOS_HOME is et
to the Trilinos source base directory (or your can just give it
explicitly).</p>
<p>See <cite>Trilinos/sampleScripts/*cmake</cite> for real examples.</p>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>[Recommended] Create a CMake file fragment and point to it.</li>
</ol>
<blockquote>
<div><p>Create a do-configure script like:</p>
<div class="highlight-python"><pre>EXTRA_ARGS=$@

cmake \
  -D Trilinos_CONFIGURE_OPTIONS_FILE:FILEPATH=MyConfigureOptions.cmake \
  -D Trilinos_ENABLE_TESTS:BOOL=ON \
  $EXTRA_ARGS \
  ${TRILINOS_HOME}</pre>
</div>
<p>where MyConfigureOptions.cmake might look like:</p>
<div class="highlight-python"><pre>SET(CMAKE_BUILD_TYPE DEBUG CACHE STRING "" FORCE)
SET(Trilinos_ENABLE_CHECKED_STL ON CACHE BOOL "" FORCE)
SET(BUILD_SHARED_LIBS ON CACHE BOOL "" FORCE)
...</pre>
</div>
<p>Using a configuration fragment file allows for better reuse of configure
options across different configure scripts and better version control of
configure options.</p>
<p>NOTE: You can actually pass in a list of configuration fragment files
which will be read in the order they are given.</p>
<p>NOTE: If you do not use &#8216;FORCE&#8217; shown above, then the option can be
overridden on the cmake command line with -D options.  Also, if you don&#8217;t
use &#8216;FORCE&#8217; then the option will not be set if it is already set in the
case (e.g. by another configuration fragment file prior in the list).</p>
</div></blockquote>
<ol class="loweralpha simple" start="3">
<li>Using ccmake to configure</li>
</ol>
<blockquote>
<div><div class="highlight-python"><pre>$ ccmake $TRILINOS_HOME</pre>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="4">
<li>Using the QT CMake configuration GUI:</li>
</ol>
<blockquote>
<div>On systems where the QT CMake GUI is installed (e.g. Windows) the CMake GUI
can be a nice way to configure Trilinos if you are a user.  To make your
configuration easily repeatable, you might want to create a fragment file
and just load it by setting Trilinos_CONFIGURE_OPTIONS_FILE (see above) in
the GUI.</div></blockquote>
</div>
<div class="section" id="selecting-the-list-of-packages-to-enable">
<h3><a class="toc-backref" href="#id12">1.4.3&nbsp;&nbsp;&nbsp;Selecting the list of packages to enable</a><a class="headerlink" href="#selecting-the-list-of-packages-to-enable" title="Permalink to this headline">¶</a></h3>
<ol class="loweralpha">
<li><p class="first">Configuring a package(s) along with all of the packages it can use:</p>
<div class="highlight-python"><pre>$ ./do-configure \
   -D Trilinos_ENABLE_&lt;TRIBITS_PACKAGE&gt;:BOOL=ON \
   -D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES:BOOL=ON \
   -D Trilinos_ENABLE_TESTS:BOOL=ON</pre>
</div>
</li>
</ol>
<blockquote>
<div>NOTE: This set of arguments allows a user to turn on &lt;TRIBITS_PACKAGE&gt; as well as
all packages that &lt;TRIBITS_PACKAGE&gt; can use.  However, tests and examples will
only be turned on for &lt;TRIBITS_PACKAGE&gt; (or any other packages specifically
enabled).</div></blockquote>
<ol class="loweralpha" start="2">
<li><p class="first">Configuring Trilinos to test all effects of changing a given package(s):</p>
<div class="highlight-python"><pre>$ ./do-configure \
   -D Trilinos_ENABLE_&lt;TRIBITS_PACKAGE&gt;:BOOL=ON \
   -D Trilinos_ENABLE_ALL_FORWARD_DEP_PACKAGES:BOOL=ON \
   -D Trilinos_ENABLE_TESTS:BOOL=ON</pre>
</div>
</li>
</ol>
<blockquote>
<div>NOTE: The above set of arguments will result in package &lt;TRIBITS_PACKAGE&gt;
and all packages that depend on &lt;TRIBITS_PACKAGE&gt; to be enabled and have all
of their tests turned on.  Tests will not be enabled in packages that do not
depend on &lt;TRIBITS_PACKAGE&gt; in this case.  This speeds up and robustifies
pre-checkin testing.</div></blockquote>
<ol class="loweralpha" start="3">
<li><p class="first">Configuring to build all stable packages with tests and examples:</p>
<div class="highlight-python"><pre>$ ./do-configure \
   -D Trilinos_ENABLE_ALL_PACKAGES:BOOL=ON \
   -D Trilinos_ENABLE_TESTS:BOOL=ON</pre>
</div>
</li>
</ol>
<blockquote>
<div><p>NOTE: Specific packages can be disabled with
Trilinos_ENABLE_&lt;TRIBITS_PACKAGE&gt;:BOOL=OFF.  This will also disable all
packages that depend on &lt;TRIBITS_PACKAGE&gt;.</p>
<p>NOTE: All examples are enabled by default when setting
Trilinos_ENABLE_TESTS:BOOL=ON.</p>
<p>NOTE: By default, setting Trilinos_ENABLE_ALL_PACKAGES=ON only enables
Primary Stable Code.  To have this also enable all secondary stable code,
you must also you must set Trilinos_ENABLE_SECONDARY_STABLE_CODE=ON.</p>
</div></blockquote>
<ol class="loweralpha" start="4">
<li><p class="first">Disable a package and all its dependencies:</p>
<div class="highlight-python"><pre>$ ./do-configure \
   -D Trilinos_ENABLE_&lt;PACKAGE_A&gt;:BOOL=ON \
   -D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES:BOOL=ON \
   -D Trilinos_ENABLE_&lt;PACKAGE_B&gt;:BOOL=OFF</pre>
</div>
<p>Above, this will enable &lt;PACKAGE_A&gt; and all of the packages that it
depends on except for &lt;PACKAGE_B&gt; and all of its forward dependencies.
For example, if you run:</p>
<div class="highlight-python"><pre>$ ./do-configure \
   -D Trilinos_ENABLE_Thyra:BOOL=ON \
   -D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES:BOOL=ON \
   -D Trilinos_ENABLE_Epetra:BOOL=OFF</pre>
</div>
<p>The packages Thyra, RTOp, and Teuchos will be enabled, but the packages
Epetra, EpetraExt will be disabled.</p>
</li>
<li><p class="first">Removing all package enables in the Cache</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-python"><pre>$ ./-do-confiugre -D Trilinos_UNENABLE_ENABLED_PACKAGES:BOOL=TRUE</pre>
</div>
<p>This option will set to empty &#8216;&#8217; all package enables, leaving all other
cache variables as they are.  You can then reconfigure with a new set of
package enables for a different set of packages.  This allows you to avoid
more expensive configure time checks and to preserve other cache variables
that you have set and don&#8217;t want to loose.</p>
</div></blockquote>
</div>
<div class="section" id="selecting-compiler-and-linker-options">
<h3><a class="toc-backref" href="#id13">1.4.4&nbsp;&nbsp;&nbsp;Selecting compiler and linker options</a><a class="headerlink" href="#selecting-compiler-and-linker-options" title="Permalink to this headline">¶</a></h3>
<p>NOTE: The Trilinos CMake build system will set up default compile options for
GCC (&#8216;GNU&#8217;) in development mode on order to help produce portable code.</p>
<ol class="loweralpha simple">
<li>Configuring to build with default debug or release compiler flags:</li>
</ol>
<blockquote>
<div><p>To build a debug version, pass into &#8216;cmake&#8217;:</p>
<div class="highlight-python"><pre>-D CMAKE_BUILD_TYPE:STRING=DEBUG</pre>
</div>
<p>This will result in default debug flags getting passed to the compiler.</p>
<p>To build a release (optimized) version, pass into &#8216;cmake&#8217;:</p>
<div class="highlight-python"><pre>-D CMAKE_BUILD_TYPE:STRING=RELEASE</pre>
</div>
<p>This will result in optimized flags getting passed to the compiler.</p>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li>Adding arbitrary compiler flags but keeping other default flags:</li>
</ol>
<blockquote>
<div><p>To append arbitrary compiler flags that apply to all build types,
configure with:</p>
<div class="highlight-python"><pre>-DCMAKE_&lt;LANG&gt;_FLAGS:STRING="&lt;EXTRA_COMPILER_OPTIONS&gt;"</pre>
</div>
<p>where &lt;LANG&gt; = C, CXX, Fortran and &lt;EXTRA_COMPILER_OPTIONS&gt; are your extra
compiler options like &#8220;-DSOME_MACRO_TO_DEFINE -funroll-loops&#8221;.  These
options will get appended to other internally defined compiler option and
therefore override them.</p>
<p>NOTES:</p>
<p>1) Setting CMAKE_&lt;LANG&gt;_FLAGS will override but will not replace any other
internally set flags in CMAKE_&lt;LANG&gt;_FLAGS defined by the Trilinos CMake
system because these flags will come after those set internally.  To get
rid of these default flags, see below.</p>
<p>2) For each compiler type (e.g. C, C++ (CXX), Fortran), CMake passes
compiler options to the compiler in the order:</p>
<div class="highlight-python"><pre>CMAKE_&lt;LANG&gt;_FLAGS   CMAKE_&lt;LANG&gt;_FLAGS_&lt;CMAKE_BUILD_TYPE&gt;</pre>
</div>
<p>where &lt;LANG&gt; = C, CXX, or Fortran and &lt;CMAKE_BUILD_TYPE&gt; = DEBUG or
RELEASE.  THEREFORE: The options in CMAKE_&lt;LANG&gt;_FLAGS_&lt;CMAKE_BUILD_TYPE&gt;
come after and override those in CMAKE_&lt;LANG&gt;_FLAGS!.</p>
<p>3) CMake defines default CMAKE_&lt;LANG&gt;_FLAGS_&lt;CMAKE_BUILD_TYPE&gt; values that
are overridden by the Trilinos CMake build system for GCC (&#8220;GNU&#8221;)
compilers in development mode (e.g. Trilinos_ENABLE_DEVELOPMENT_MODE=ON).
This is mostly to provide greater control over the Trilinos development
environment.  This means that users setting the CMAKE_&lt;LANG&gt;_FLAGS will
<em>not</em> override the internally set debug or release flags in
CMAKE_&lt;LANG&gt;_FLAGS_&lt;CMAKE_BUILD_TYPE&gt; which come after on the compile
line.  Therefore, setting CMAKE_&lt;LANG&gt;_FLAGS should only be used for
options that will not get overridden by the internally-set debug or
release compiler flags in CMAKE_&lt;LANG&gt;_FLAGS_&lt;CMAKE_BUILD_TYPE&gt;.  However,
setting CMAKE_&lt;LANG&gt;_FLAGS will work well for adding extra compiler
defines (e.g. -DSOMETHING) for example.</p>
<p>WARNING: Any options that you set through the cache variable
CMAKE_&lt;LANG&gt;_FLAGS_&lt;CMAKE_BUILD_TYPE&gt; (where &lt;CMAKE_BUILD_TYPE&gt; = DEBUG or
RELEASE) will get overridden in the Trilinos CMake system for GNU
compilers in development mode so don&#8217;t try to manually set
CMAKE_&lt;LANG&gt;_FLAGS_&lt;CMAKE_BUILD_TYPE&gt;!</p>
</div></blockquote>
<ol class="loweralpha simple" start="3">
<li>Overriding debug/release compiler options:</li>
</ol>
<blockquote>
<div><p>To pass in compiler options that override the default debug options use:</p>
<div class="highlight-python"><pre>-D CMAKE_C_FLAGS_DEBUG_OVERRIDE:STRING="-g -O1" \
-D CMAKE_CXX_FLAGS_DEBUG_OVERRIDE:STRING="-g -O1"</pre>
</div>
<p>and to override default release options use:</p>
<div class="highlight-python"><pre>-D CMAKE_C_FLAGS_RELEASE_OVERRIDE:STRING="-04 -funroll-loops" \
-D CMAKE_CXX_FLAGS_RELEASE_OVERRIDE:STRING="-03 -fexceptions"</pre>
</div>
<p>NOTES: The new CMake variable CMAKE_${LANG}_FLAGS_${BUILDTYPE}_OVERRIDE is
used and not CMAKE_${LANG}_FLAGS_${BUILDTYPE} because the Trilinos CMake
wrappers redefine CMAKE_${LANG}_FLAGS_${BUILDTYPE} and it is impossible to
determine if the value defined is determined by a user or by CMake.</p>
</div></blockquote>
<ol class="loweralpha simple" start="4">
<li>Appending arbitrary link flags to every executable:</li>
</ol>
<blockquote>
<div><p>In order to append any set of arbitrary link flags to your executables use:</p>
<div class="highlight-python"><pre>-D Trilinos_EXTRA_LINK_FLAGS:STRING="$EXTRA_LINK_FLAGS"</pre>
</div>
<p>Above, you can pass any type of library and they will always be the last
libraries listed, even after all of the TPL.</p>
<p>NOTE: This is how you must set extra libraries like Fortran libraries and
MPI libraries (when using raw compilers).  Please only use this variable
as a last resort.</p>
<p>NOTE: You must only pass in libraries in Trilinos_EXTRA_LINK_FLAGS and
<em>not</em> arbitrary linker flags.  To pass in extra linker flags that are not
libraries, use the built-in CMake variable CMAKE_EXE_LINKER_FLAGS instead.</p>
</div></blockquote>
<ol class="loweralpha simple" start="5">
<li>Turning off strong warnings for individual packages:</li>
</ol>
<blockquote>
<div><p>To turn off strong warnings (for all langauges) for a given TriBITS
package, set:</p>
<div class="highlight-python"><pre>-D &lt;TRIBITS_PACKAGE&gt;_DISABLE_STRONG_WARNINGS:BOOL=ON</pre>
</div>
<p>This will only affect the compilation of the sources for
&lt;TRIBITS_PACKAGES&gt;, not warnings generated from the header files in
downstream packages or client code.</p>
</div></blockquote>
<ol class="loweralpha simple" start="6">
<li>Overriding all (strong warnings and debug/release) compiler options:</li>
</ol>
<blockquote>
<div><p>To override all compiler options, including both strong warning options
and debug/release options, configure with:</p>
<div class="highlight-python"><pre>-D CMAKE_C_FLAGS:STRING="-04 -funroll-loops" \
-D CMAKE_CXX_FLAGS:STRING="-03 -fexceptions" \
-D CMAKE_BUILD_TYPE:STRING=NONE \
-D Trilinos_ENABLE_STRONG_C_COMPILE_WARNINGS:BOOL=OFF \
-D Trilinos_ENABLE_STRONG_CXX_COMPILE_WARNINGS:BOOL=OFF \
-D Trilinos_ENABLE_SHADOW_WARNINGS:BOOL=OFF \
-D Trilinos_ENABLE_COVERAGE_TESTING:BOOL=OFF \
-D Trilinos_ENABLE_CHECKED_STL:BOOL=OFF \</pre>
</div>
<p>NOTE: Options like Trilinos_ENABLE_SHADOW_WARNINGS,
Trilinos_ENABLE_COVERAGE_TESTING, and Trilinos_ENABLE_CHECKED_STL do not
need to be turned off by default but they are shown above to make it clear
what other CMake cache variables can add compiler and link arguments.</p>
</div></blockquote>
<ol class="loweralpha simple" start="7">
<li>Enable and disable shadowing warnings for all Trilinos packages:</li>
</ol>
<blockquote>
<div><p>To enable shadowing warnings for all Trilinos packages (that don&#8217;t already
have them turned on) then use:</p>
<div class="highlight-python"><pre>-D Trilinos_ENABLE_SHADOW_WARNINGS:BOOL=ON</pre>
</div>
<p>To disable shadowing warnings for all Trilinos packages then use:</p>
<div class="highlight-python"><pre>-D Trilinos_ENABLE_SHADOW_WARNINGS:BOOL=OFF</pre>
</div>
<p>NOTE: The default value is empty &#8216;&#8217; which lets each Trilinos package
decide for itself if shadowing warnings will be turned on or off for that
package.</p>
</div></blockquote>
<ol class="loweralpha simple" start="8">
<li>Removing warnings as errors for CLEANED packages:</li>
</ol>
<blockquote>
<div><p>To remove the -Werror flag (or some other flag that is set) from being
applied to compile CLEANED packages like Teuchos, set the following when
configuring:</p>
<div class="highlight-python"><pre>-D Trilinos_WARNINGS_AS_ERRORS_FLAGS:STRING=""</pre>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="building-makefile-generator">
<h2><a class="toc-backref" href="#id14">1.5&nbsp;&nbsp;&nbsp;Building (Makefile generator)</a><a class="headerlink" href="#building-makefile-generator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building-all-targets">
<h3><a class="toc-backref" href="#id15">1.5.1&nbsp;&nbsp;&nbsp;Building all targets</a><a class="headerlink" href="#building-all-targets" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make [-jN]</pre>
</div>
<p>(where N is the number of processes to use)</p>
</div>
<div class="section" id="discovering-what-targets-are-available-to-build-after-configuration">
<h3><a class="toc-backref" href="#id16">1.5.2&nbsp;&nbsp;&nbsp;Discovering what targets are available to build after configuration</a><a class="headerlink" href="#discovering-what-targets-are-available-to-build-after-configuration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make help</pre>
</div>
</div>
<div class="section" id="see-all-of-the-targets-to-build-for-a-package">
<h3><a class="toc-backref" href="#id17">1.5.3&nbsp;&nbsp;&nbsp;See all of the targets to build for a package</a><a class="headerlink" href="#see-all-of-the-targets-to-build-for-a-package" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make help | grep &lt;TRIBITS_PACKAGE&gt;_</pre>
</div>
<p>(where &lt;TRIBITS_PACKAGE&gt; = Teuchos, Epetra, NOX, etc.)</p>
<p>or:</p>
<div class="highlight-python"><pre>$ cd packages/&lt;TRIBITS_PACKAGE&gt;
$ make help</pre>
</div>
</div>
<div class="section" id="building-all-of-the-targets-for-a-package">
<h3><a class="toc-backref" href="#id18">1.5.4&nbsp;&nbsp;&nbsp;Building all of the targets for a package</a><a class="headerlink" href="#building-all-of-the-targets-for-a-package" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make &lt;TRIBITS_PACKAGE&gt;_all</pre>
</div>
<p>(where &lt;TRIBITS_PACKAGE&gt; = Teuchos, Epetra, NOX, etc.)</p>
<p>or:</p>
<div class="highlight-python"><pre>$ cd packages/&lt;TRIBITS_PACKAGE&gt;
$ make</pre>
</div>
</div>
</div>
<div class="section" id="testing-with-ctest">
<h2><a class="toc-backref" href="#id19">1.6&nbsp;&nbsp;&nbsp;Testing with CTest</a><a class="headerlink" href="#testing-with-ctest" title="Permalink to this headline">¶</a></h2>
<div class="section" id="recommended-testing-using-ctest">
<h3><a class="toc-backref" href="#id20">1.6.1&nbsp;&nbsp;&nbsp;[Recommended] Testing using <em>ctest</em></a><a class="headerlink" href="#recommended-testing-using-ctest" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ ctest -j4</pre>
</div>
<p>(see output in Testing/Temporary/LastTest.log)</p>
<p>NOTE: The -jN argument allows CTest to use more processes to run tests but
will not exceed the max number of processes specified at configure time.</p>
<p>See detailed test output with:</p>
<div class="highlight-python"><pre>$ ctest -j4 -VV</pre>
</div>
</div>
<div class="section" id="only-running-tests-for-a-single-package">
<h3><a class="toc-backref" href="#id21">1.6.2&nbsp;&nbsp;&nbsp;Only running tests for a single package</a><a class="headerlink" href="#only-running-tests-for-a-single-package" title="Permalink to this headline">¶</a></h3>
<p>Running a single package test:</p>
<div class="highlight-python"><pre>$ ctest -j4 -R '^&lt;TRIBITS_PACKAGE&gt;_'</pre>
</div>
<p>(e.g. TRIBITS_PACKAGE = Teuchos, Epetra, etc.)  (see output in
Testing/Temporary/LastTest.log)</p>
<p>or:</p>
<div class="highlight-python"><pre>$ cd packages/&lt;TRIBITS_PACKAGE&gt;
$ ctest -j4</pre>
</div>
<p>Running a single test with full output to the console:</p>
<div class="highlight-python"><pre>$ ctest -R ^FULL_TEST_NAME$ -VV</pre>
</div>
<p>(e.g. FULL_TEST_NAME = Teuchos_Comm_test, Epetra_MultiVector_test, etc. )</p>
</div>
<div class="section" id="running-memory-checking">
<h3><a class="toc-backref" href="#id22">1.6.3&nbsp;&nbsp;&nbsp;Running memory checking</a><a class="headerlink" href="#running-memory-checking" title="Permalink to this headline">¶</a></h3>
<p>To run the memory tests for just a single package, from the <em>base</em> build
directory, run:</p>
<div class="highlight-python"><pre>$ ctest -R '^&lt;TRIBITS_PACKAGE&gt;_' -T memcheck</pre>
</div>
<p>(where &lt;TRIBITS_PACKAGE&gt; = Epetra, NOX etc.).</p>
<dl class="docutils">
<dt>(see the detailed output in</dt>
<dd>./Testing/Temporary/LastDynamicAnalysis_DATE_TIME.log)</dd>
</dl>
<p>NOTE: If you try to run memory tests from any subdirectories, that does not
seem to work.  You have to run them from the base build directory and then use
-R &#8216;^&lt;TRIBITS_PACKAGE&gt;_&#8217; with ctest in order to run your packages tests.</p>
</div>
<div class="section" id="testing-using-make-test">
<h3><a class="toc-backref" href="#id23">1.6.4&nbsp;&nbsp;&nbsp;Testing using <tt class="docutils literal"><span class="pre">make</span> <span class="pre">test</span></tt></a><a class="headerlink" href="#testing-using-make-test" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make test</pre>
</div>
<p>NOTE: This is equivalent to just running &#8216;ctest&#8217; without any arguments.</p>
</div>
</div>
<div class="section" id="installing">
<h2><a class="toc-backref" href="#id24">1.7&nbsp;&nbsp;&nbsp;Installing</a><a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-the-install-prefix-at-configure-time">
<h3><a class="toc-backref" href="#id25">1.7.1&nbsp;&nbsp;&nbsp;Setting the install prefix at configure time</a><a class="headerlink" href="#setting-the-install-prefix-at-configure-time" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ ./do-configure \
   -D CMAKE_INSTALL_PREFIX:PATH=$HOME/PROJECTS/install/trilinos/mpi/opt</pre>
</div>
<p>NOTE: The script &#8216;do-configure&#8217; is just a simple shell script that calls CMake
as shown above.</p>
</div>
<div class="section" id="installing-after-configuration">
<h3><a class="toc-backref" href="#id26">1.7.2&nbsp;&nbsp;&nbsp;Installing after configuration</a><a class="headerlink" href="#installing-after-configuration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make install</pre>
</div>
<p>(will build all of the targets needed before the install)</p>
</div>
<div class="section" id="uninstall">
<h3><a class="toc-backref" href="#id27">1.7.3&nbsp;&nbsp;&nbsp;Uninstall</a><a class="headerlink" href="#uninstall" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make uninstall</pre>
</div>
</div>
</div>
<div class="section" id="packaging">
<h2><a class="toc-backref" href="#id28">1.8&nbsp;&nbsp;&nbsp;Packaging</a><a class="headerlink" href="#packaging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creating-a-tarball-of-the-source-tree">
<h3><a class="toc-backref" href="#id29">1.8.1&nbsp;&nbsp;&nbsp;Creating a tarball of the source tree</a><a class="headerlink" href="#creating-a-tarball-of-the-source-tree" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ make package_source</pre>
</div>
<p>NOTE: The above command will tar up <em>everything</em> in the source tree (except
for files explicitly excluded in the CMakeLists.txt files) so make sure that
you start with a totally clean source tree before you do this.  Or, you could
build Doxygen documentation first and then tar up Trilinos and that would give
you the source with Doxygen documentation.</p>
<p>NOTE: You can control what gets put into the tarball by setting the cache
variable CPACK_SOURCE_IGNORE_FILES when configuring with CMake.</p>
</div>
</div>
<div class="section" id="dashboard-submissions">
<h2><a class="toc-backref" href="#id30">1.9&nbsp;&nbsp;&nbsp;Dashboard submissions</a><a class="headerlink" href="#dashboard-submissions" title="Permalink to this headline">¶</a></h2>
<p>You can use the extended CTest scripting system in Trilinos to submit
package-by-package build, test, coverage, memcheck results to the dashboard.</p>
<p>First, configure as normal but add the build and test parallel levels with:</p>
<div class="highlight-python"><pre>$ ./do-configure -DCTEST_BUILD_FLAGS:STRING=-j4 \
  -DCTEST_PARALLEL_LEVEL:STRING=4 \
  [OTHER OPTIONS]</pre>
</div>
<p>Then, invoke the build, test and submit with:</p>
<div class="highlight-python"><pre>$ make dashboard</pre>
</div>
<p>This invokes the advanced CTest script
Trilinos/cmake/ctest/experimental_build_test.cmake to do an experimental build
for all of the packages that you have explicitly enabled.  The packages that
are implicitly enabled due to package dependencies are not directly processed
by the experimental_build_test.cmake script.</p>
<p>There are a number of options that you can set in the environment to control
what this script does.  This set of options can be found by doing:</p>
<div class="highlight-python"><pre>$ grep 'SET_DEFAULT_AND_FROM_ENV(' \
    Trilinos/cmake/tribits/ctest/TribitsCTestDriverCore.cmake</pre>
</div>
<p>Currently, this options includes:</p>
<div class="highlight-python"><pre>Blah blah blah ...</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1&nbsp;&nbsp;&nbsp;TriBITS User Quickstart</a><ul>
<li><a class="reference internal" href="#introduction">1.1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference internal" href="#getting-set-up-to-use-cmake">1.2&nbsp;&nbsp;&nbsp;Getting set up to use CMake</a><ul>
<li><a class="reference internal" href="#installing-a-binary-release-of-cmake-casual-trilinos-users">1.2.1&nbsp;&nbsp;&nbsp;Installing a binary release of CMake [casual Trilinos users]</a></li>
<li><a class="reference internal" href="#installing-cmake-from-source-trilinos-developers-and-experienced-users">1.2.2&nbsp;&nbsp;&nbsp;Installing CMake from source [Trilinos developers and experienced users]</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getting-help">1.3&nbsp;&nbsp;&nbsp;Getting Help</a><ul>
<li><a class="reference internal" href="#finding-cmake-help-at-the-website">1.3.1&nbsp;&nbsp;&nbsp;Finding CMake help at the website</a></li>
<li><a class="reference internal" href="#building-cmake-help-locally">1.3.2&nbsp;&nbsp;&nbsp;Building CMake help locally</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-makefile-generator">1.4&nbsp;&nbsp;&nbsp;Configuring (Makefile Generator)</a><ul>
<li><a class="reference internal" href="#setting-up-a-build-directory">1.4.1&nbsp;&nbsp;&nbsp;Setting up a build directory</a></li>
<li><a class="reference internal" href="#basic-configuration-of-trilinos">1.4.2&nbsp;&nbsp;&nbsp;Basic configuration of Trilinos</a></li>
<li><a class="reference internal" href="#selecting-the-list-of-packages-to-enable">1.4.3&nbsp;&nbsp;&nbsp;Selecting the list of packages to enable</a></li>
<li><a class="reference internal" href="#selecting-compiler-and-linker-options">1.4.4&nbsp;&nbsp;&nbsp;Selecting compiler and linker options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-makefile-generator">1.5&nbsp;&nbsp;&nbsp;Building (Makefile generator)</a><ul>
<li><a class="reference internal" href="#building-all-targets">1.5.1&nbsp;&nbsp;&nbsp;Building all targets</a></li>
<li><a class="reference internal" href="#discovering-what-targets-are-available-to-build-after-configuration">1.5.2&nbsp;&nbsp;&nbsp;Discovering what targets are available to build after configuration</a></li>
<li><a class="reference internal" href="#see-all-of-the-targets-to-build-for-a-package">1.5.3&nbsp;&nbsp;&nbsp;See all of the targets to build for a package</a></li>
<li><a class="reference internal" href="#building-all-of-the-targets-for-a-package">1.5.4&nbsp;&nbsp;&nbsp;Building all of the targets for a package</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-with-ctest">1.6&nbsp;&nbsp;&nbsp;Testing with CTest</a><ul>
<li><a class="reference internal" href="#recommended-testing-using-ctest">1.6.1&nbsp;&nbsp;&nbsp;[Recommended] Testing using <em>ctest</em></a></li>
<li><a class="reference internal" href="#only-running-tests-for-a-single-package">1.6.2&nbsp;&nbsp;&nbsp;Only running tests for a single package</a></li>
<li><a class="reference internal" href="#running-memory-checking">1.6.3&nbsp;&nbsp;&nbsp;Running memory checking</a></li>
<li><a class="reference internal" href="#testing-using-make-test">1.6.4&nbsp;&nbsp;&nbsp;Testing using <tt class="docutils literal"><span class="pre">make</span> <span class="pre">test</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing">1.7&nbsp;&nbsp;&nbsp;Installing</a><ul>
<li><a class="reference internal" href="#setting-the-install-prefix-at-configure-time">1.7.1&nbsp;&nbsp;&nbsp;Setting the install prefix at configure time</a></li>
<li><a class="reference internal" href="#installing-after-configuration">1.7.2&nbsp;&nbsp;&nbsp;Installing after configuration</a></li>
<li><a class="reference internal" href="#uninstall">1.7.3&nbsp;&nbsp;&nbsp;Uninstall</a></li>
</ul>
</li>
<li><a class="reference internal" href="#packaging">1.8&nbsp;&nbsp;&nbsp;Packaging</a><ul>
<li><a class="reference internal" href="#creating-a-tarball-of-the-source-tree">1.8.1&nbsp;&nbsp;&nbsp;Creating a tarball of the source tree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dashboard-submissions">1.9&nbsp;&nbsp;&nbsp;Dashboard submissions</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/TribitsUserQuickstart.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Tribits User Quickstart 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Roscoe A. Bartlett.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>